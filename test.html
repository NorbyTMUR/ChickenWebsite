<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="stuff.css">
    <!-- Bootstrap CSS -->
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
   <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chicken Scouting</title>
</head>

<body>
    <label>Scout Name:</label>
    <input type="text" id="scoutname" name="name" required minlength="0" maxlength="246" size="10" />
    <br>

    <label>Team Number Scouted:</label>

    <input type="text" id="teamnum" name="name" required minlength="0" maxlength="246" size="10" />
    <br>
    <label>Match Number:</label>
    <input type="number" id="matchNum" name="quantity" min="0" max="100000000000"/>

    <br><br>

    <h3>Alliance</h3>
    <div class="btn-group" role="group">
        <button type="button" class="btn btn-primary" id="allianceBlue">Blue</button>
        <button type="button" class="btn btn-danger" id="allianceRed">Red</button>
        <script>
            var selectedAlliance = null
            document.getElementById("allianceBlue").addEventListener("click", addAutoSpeaker);
            document.getElementById("allianceRed").addEventListener("click", subAutoSpeaker);
            //TODO get it to override the boolean with whichever was clicked more recently - a team cant be both red& blue.
            function addAutoSpeaker() {
                document.getElementById("allianceBlue").innerHTML = "you clicked me";
                document.getElementById('allianceRed').textContent = 'Red'
                blueAlliance = document.getElementById("allianceBlue");
                selectedAlliance = "Blue"
                //this will not print the actual value anyway because it hasn't gotten the value. Worry about this a bit later.
                //for testing
                console.log(blueAlliance);
            }
            function subAutoSpeaker() {
                redAlliance = document.getElementById("allianceRed");
                document.getElementById("allianceRed").textContent = 'you clicked me';
                document.getElementById('allianceBlue').textContent = 'Blue'
                selectedAlliance = "Red"
                //for testing
                console.log(redAlliance);
            }
        </script>
    </div>
  
    <br><br>

    <div class="container">
        <h2>Auto:</h2>
        
        <div class="btn-group-autoscores" role="group">
            <label>Left zone:</label>
            <label style="float: right;" class="switch">
                <input type="checkbox" id="leftZone">
                <span class="slider round"></span>
            </label>
            <script>
                var leftZoneBool = false;
                document.getElementById("leftZone").addEventListener("click", fnLeftZone);
                function fnLeftZone() {
                    leftZoneBool = !leftZoneBool;
                    //for testing
                    console.log(leftZoneBool);
                }
            </script>
        </div>

        <br>

        <div class="btn-group-autoscores" role="group">
            <label id="speakerAutoScores">Speaker Scores: 0</label>
            <button style="float: right;" type="button" class="btn btn-secondary" id="addAutoSpeaker">+</button>
            <button style="float: right" type="button" class="btn btn-secondary" id="subAutoSpeaker">-</button>
            <script>
                var autoSpeakerCount = 0
                document.getElementById("addAutoSpeaker").addEventListener("click", addAutoSpeaker);
                document.getElementById("subAutoSpeaker").addEventListener("click", subAutoSpeaker);
                //TODO get it to override the boolean with whichever was clicked more recently - a team cant be both red& blue.
                function addAutoSpeaker() {
                    autoSpeakerCount++;
                    if(autoSpeakerCount > 9) autoSpeakerCount = 9;
                    document.getElementById("speakerAutoScores").textContent = "Speaker Scores: " + autoSpeakerCount;
                    //this will not print the actual value anyway because it hasn't gotten the value. Worry about this a bit later.
                    //for testing
                    console.log('good one');
                }
                function subAutoSpeaker() {
                    autoSpeakerCount--;
                    if(autoSpeakerCount < 0) autoSpeakerCount = 0;
                    document.getElementById("speakerAutoScores").textContent = "Speaker Scores: " + autoSpeakerCount;
                    //for testing
                    console.log('second good one');
                }
            </script>
        </div>        

        <br>

        <div class="btn-group-autoscores" role="group">
            <label id="autoAmpScores">Amp Scores: 0</label>
            <button style="float: right;" type="button" class="btn btn-secondary" id="addAutoAmp">+</button>
            <button style="float: right" type="button" class="btn btn-secondary" id="subAutoAmp">-</button>
            <script>
                var autoAmpCount = 0
                document.getElementById("addAutoAmp").addEventListener("click", addAutoSpeaker);
                document.getElementById("subAutoAmp").addEventListener("click", subAutoSpeaker);
                //TODO get it to override the boolean with whichever was clicked more recently - a team cant be both red& blue.
                function addAutoSpeaker() {
                    autoAmpCount++;
                    if(autoAmpCount > 9) autoAmpCount = 9;
                    document.getElementById("autoAmpScores").textContent = "Amp Scores: " + autoAmpCount;
                    //this will not print the actual value anyway because it hasn't gotten the value. Worry about this a bit later.
                    //for testing
                    console.log('good one');
                }
                function subAutoSpeaker() {
                    autoAmpCount--;
                    if(autoAmpCount < 0) autoAmpCount = 0;
                    document.getElementById("autoAmpScores").textContent = "Amp Scores: " + autoAmpCount;
                    //for testing
                    console.log('second good one');
                }
            </script>
        </div> 
    </div>

<br><br>

<div class="container">
    <h2>Teleop</h2>

    <p>Amp Points</p>
    <input type="number" id="teleAmpPts" name="quantity" min="0" max="100000000000"/> <br>

    <p>Speaker Points</p>
    <input type="number" id="teleSpPts" name="quantity" min="0" max="100000000000"/> <br>
</div>

<br><br>

<div class="container">
    <div class="btn-danger">
        <button style="float: left;" type="button" class="btn btn-secondary" id="submit">Submit!!!</button>
    </div>

    <br><br>

    <div id="QRCode"></div>
    <script>

        // JavaScript to handle toggle switch state change and display text accordingly
        //TODO: Figure out how to collect the data in a json file (hosted maybe on postgre sql), work from there.
        //TODO: finish adding the fields
        document.getElementById('submit').addEventListener("click", submitButton)
        // const outputText = document.getElementById('outputText');
        console.log("Here I am on my own....")

        function submitButton() {
            console.log("Auto amps: " + autoAmpCount);
            console.log("Auto speakers: " + autoSpeakerCount);
            console.log("Alliance: " + selectedAlliance);
            console.log("Here I am on my own....");
            console.log("My name is " + document.getElementById("scoutname"));
            console.log("I scouted team " + document.getElementById("teamnum"));
            generateqr();
            // console.log("Auto amps: " + autoAmpCount)
            // console.log("Auto amps: " + autoAmpCount)
        }

        function generateqr() {
            jsobj = {
                "scoutname": document.getElementById('scoutname').value,
                "teamnumber": Number(document.getElementById("teamnum").value),
                "matchnumber": Number(document.getElementById("matchNum").value),
                "alliance": selectedAlliance,
                "autoamppoints": autoAmpCount * 2,
                "autospeakerpoints": autoSpeakerCount * 5,
                "autoleftzone": leftZoneBool,
            }
            
            var qr = new QRCode("QRCode", JSON.stringify(jsobj));
        }
    
    </script>
</div>

<!-- Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

</body>
</html>
